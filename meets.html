<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meets – WV Runs</title>
  <link rel="icon" type="image/png" href="assets/Favicon Generator/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="assets/Favicon Generator/favicon.svg" />
  <link rel="shortcut icon" href="assets/Favicon Generator/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/Favicon Generator/apple-touch-icon.png" />
  <link rel="manifest" href="assets/Favicon Generator/site.webmanifest" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <img src="assets/Wvruns Logo.png" alt="WV Runs Logo" class="logo" />
    <nav>
      <a href="index.html">Home</a>
      <a href="schools.html">Schools</a>
      <a href="meets.html">Meets</a>
      <a href="rankings.html">Rankings</a>
    </nav>
  </header>
  <main>
    <h1>Meets</h1>
    <p>Browse all cross country and track meets in West Virginia.</p>
    <div id="meets-list">Loading meets...</div>
  </main>
  <footer>
    <p>&copy; 2025 WV Runs — Built by runners, for runners.</p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase-config.js"></script>
  <script>
    async function loadMeets() {
      const container = document.getElementById('meets-list');
      try {
        const { data, error } = await supabase
          .from('meets')
          .select('*')
          .order('date', { ascending: false });
        if (error) throw error;
        const meets = data || [];
        if (!meets.length) {
          container.innerHTML = '<p>No meets found.</p>';
          return;
        }
        container.innerHTML = '<ul style="list-style:none; padding:0; margin:0;">' +
          meets.map(meet => {
            const date = meet.date ? new Date(meet.date).toLocaleDateString() : 'Date TBD';
            const location = meet.location ? ` — ${meet.location}` : '';
            return `
              <li style="margin-bottom: 1em;">
                <a href="meet.html?slug=${meet.slug}" style="font-weight:bold; font-size:1.1em;">${meet.name}</a>
                <div style="color:#666;">${date}${location}</div>
                ${meet.description ? `<div style=\"color:#888; font-size:.95em;\">${meet.description}</div>` : ''}
              </li>
            `;
          }).join('') + '</ul>';
      } catch (e) {
        console.error('Error loading meets:', e);
        container.innerHTML = '<p>Error loading meets.</p>';
      }
    }
    document.addEventListener('DOMContentLoaded', loadMeets);
  </script>
</body>
</html>

