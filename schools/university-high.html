<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>University High Hawks – WV Runs</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <header>
    <img src="../assets/team logos/university-high.png" alt="University High Hawks Logo" class="team-logo" />
    <h1>University High Hawks</h1>
    <nav>
      <a href="../home.html">Home</a>
      <a href="../schools.html">Schools</a>
      <a href="../meets.html">Meets</a>
      <a href="../admin.html">Admin</a>
    </nav>
  </header>

  <main>
    <section class="team-intro">
      <h2>About the Team</h2>
      <p>The University High Hawks represent University High School in Morgantown, WV.</p>
    </section>

    <section class="roster">
      <h2>Roster</h2>
      <div id="roster-loading">Loading roster...</div>
      <table id="roster-table" style="display: none;">
        <thead>
          <tr>
            <th>Name</th>
            <th>Grade</th>
            <th>Gender</th>
          </tr>
        </thead>
        <tbody id="roster-tbody">
        </tbody>
      </table>
      <p id="no-athletes" style="display: none;"><em>No athletes found. Add them via the admin page.</em></p>
    </section>

    <section class="events">
      <h2>Recent Meets & Results</h2>
      <ul id="meets-list">
        <!-- Meets will be loaded here -->
      </ul>
      <p>Click a meet to view full results. More data will be loaded dynamically.</p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 WV Runs — Built by runners, for runners.</p>
  </footer>

  <!-- Supabase Client Library -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Supabase Configuration -->
  <script src="../supabase-config.js"></script>
  
  <script>
    // Load athletes for University High
    async function loadRoster() {
      const schoolSlug = 'university-high';
      
      try {
        const { data: athletes, error } = await supabase
          .from('athletes')
          .select('*')
          .eq('school_slug', schoolSlug)
          .order('name');
        
        if (error) {
          console.error('Error loading athletes:', error);
          document.getElementById('roster-loading').textContent = 'Error loading roster';
          return;
        }
        
        const tbody = document.getElementById('roster-tbody');
        const loadingDiv = document.getElementById('roster-loading');
        const table = document.getElementById('roster-table');
        const noAthletes = document.getElementById('no-athletes');
        
        if (athletes && athletes.length > 0) {
          athletes.forEach(athlete => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${athlete.name}</td>
              <td>${athlete.grade || 'N/A'}</td>
              <td>${athlete.gender || 'N/A'}</td>
            `;
            tbody.appendChild(row);
          });
          
          loadingDiv.style.display = 'none';
          table.style.display = 'table';
        } else {
          loadingDiv.style.display = 'none';
          noAthletes.style.display = 'block';
        }
      } catch (error) {
        console.error('Error loading roster:', error);
        document.getElementById('roster-loading').textContent = 'Error loading roster';
      }
    }
    
    // Load roster when page loads
    loadRoster();
  </script>
</body>
</html>

