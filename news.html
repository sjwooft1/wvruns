<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>News & Recaps ‚Äî Mountain State Miles</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  
  <style>
    * { box-sizing: border-box; }
    
    :root {
      --primary: #002855;
      --secondary: #0056b3;
      --accent: #ff6b35;
      --accent-dark: #d9530a;
      --bg-light: #f8f9fa;
      --text-primary: #1a1a1a;
      --text-secondary: #666;
    }
    
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg-light);
      color: var(--text-primary);
    }

    .navbar {
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      padding: 15px 20px;
      display: flex;
      justify-content: center;
    }
    .navbar-content {
      width: 100%;
      max-width: 1200px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .navbar-brand { font-weight: 800; font-size: 1.25rem; color: var(--primary); text-decoration: none; }
    .navbar-nav { display: flex; list-style: none; gap: 20px; padding: 0; }
    .navbar-link { text-decoration: none; color: var(--text-secondary); font-weight: 600; }
    .navbar-link.active { color: var(--accent); }

    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    
    .page-header {
      text-align: center;
      margin-bottom: 50px;
    }

    .page-title {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--primary);
      margin: 0 0 10px;
    }
    
    .page-subtitle {
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    .news-item {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 24px;
      border-left: 5px solid var(--accent);
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      transition: all 0.3s;
    }
    
    .news-item:hover {
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }

    .news-header {
      display: flex;
      justify-content: space-between;
      align-items: start;
      margin-bottom: 15px;
    }

    .news-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      margin: 0;
    }

    .news-date {
      color: var(--accent);
      font-weight: 600;
      font-size: 0.9rem;
      white-space: nowrap;
    }

    .news-meta {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      font-size: 0.9rem;
      color: var(--text-secondary);
      flex-wrap: wrap;
    }

    .meta-tag {
      background: #f0f0f0;
      padding: 4px 12px;
      border-radius: 20px;
      display: inline-block;
    }

    .meta-tag.sport-track {
      background: rgba(0, 40, 85, 0.1);
      color: var(--primary);
    }

    .meta-tag.sport-xc {
      background: rgba(16, 185, 129, 0.1);
      color: #10b981;
    }

    .news-content {
      line-height: 1.7;
      color: var(--text-primary);
      margin-bottom: 15px;
    }

    .highlight {
      background: rgba(255, 107, 53, 0.1);
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border-left: 4px solid var(--accent);
    }

    .athlete-callout {
      background: rgba(0, 40, 85, 0.05);
      padding: 12px 15px;
      border-radius: 6px;
      margin: 8px 0;
      font-weight: 500;
      color: var(--primary);
    }

    .loading-state {
      text-align: center;
      padding: 40px;
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    .no-news {
      text-align: center;
      padding: 40px;
      background: white;
      border-radius: 12px;
      color: var(--text-secondary);
    }

    footer {
      background: rgba(0, 40, 85, 0.9);
      padding: 60px 20px;
      color: white;
      text-align: center;
      margin-top: 60px;
      position: relative;
    }

    .footer-col {
      display: inline-block;
      margin: 0 30px;
      text-align: left;
    }

    .footer-col h4 {
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .footer-col ul {
      list-style: none;
      padding: 0;
    }

    .footer-col li {
      margin-bottom: 0.5rem;
    }

    .footer-col a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-col a:hover {
      color: white;
    }

    .footer-bottom {
      margin-top: 2rem;
    }

    @media (max-width: 768px) {
      .page-title {
        font-size: 1.8rem;
      }
      
      .news-item {
        padding: 20px;
      }

      .news-header {
        flex-direction: column;
      }

      .news-date {
        margin-top: 10px;
      }

      .footer-col {
        display: block;
        margin: 20px 0;
      }
    }
  </style>
</head>
<body>

  <header>
    <nav class="navbar">
      <div class="navbar-content">
        <a href="index.html" class="navbar-brand">üèîÔ∏è Mountain State Miles</a>
        <ul class="navbar-nav">
          <li><a href="/home/index.html" class="navbar-link">Home</a></li>
          <li><a href="news.html" class="navbar-link active">News</a></li>
          <li><a href="/Track/index.html" class="navbar-link">Track</a></li>
          <li><a href="/CrossCountry/xc.html" class="navbar-link">XC</a></li>
        </ul>
      </div>
    </nav>
  </header>
  
  <main>
    <div class="page-header">
      <h1 class="page-title">üì∞ News & Recaps</h1>
      <p class="page-subtitle">Weekly summaries and automated meet analysis</p>
    </div>

    <div id="news-container">
      <div class="loading-state">Loading recaps...</div>
    </div>

  </main>
  
  <footer>
    <div class="row">
      <div class="footer-col">
        <h4>General</h4>
        <ul>
          <li><a href="/home/index.html">Home</a></li>
          <li><a href="/home/admin.html">Admin</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Track</h4>
        <ul>
          <li><a href="/Track/index.html">Home</a></li>
          <li><a href="/Track/meets.html">Meets</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Cross Country</h4>
        <ul>
          <li><a href="/CrossCountry/xc.html">Home</a></li>
          <li><a href="/CrossCountry/meets.html">Meets</a></li>
        </ul>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="footer-bottom">
        <p>&#169; 2026 Mountain State Miles ‚Äî Built by runners, for runners.</p>
      </div>
    </div>
  </footer>
  
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  
  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCBQt9I_OSoUuTM61F-JXNBkD98f7PCJcA",
      authDomain: "mountainstatemiles-1326f.firebaseapp.com",
      databaseURL: "https://mountainstatemiles-1326f-default-rtdb.firebaseio.com",
      projectId: "mountainstatemiles-1326f",
      storageBucket: "mountainstatemiles-1326f.firebasestorage.app",
      messagingSenderId: "605911511756",
      appId: "1:605911511756:web:0e99071a816f0a39210869",
      measurementId: "G-N3DNFRQNF9"
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    async function loadNews() {
      const container = document.getElementById('news-container');
      
      try {
        const snapshot = await database.ref('news').once('value');
        const news = [];
        
        snapshot.forEach(child => {
          news.push({
            id: child.key,
            ...child.val()
          });
        });

        // Sort by date descending
        news.sort((a, b) => {
          const dateA = new Date(a.date || 0);
          const dateB = new Date(b.date || 0);
          return dateB - dateA;
        });

        if (!news.length) {
          container.innerHTML = '<div class="no-news">No news articles yet. Check back soon!</div>';
          return;
        }

        function formatDate(dateString) {
          const date = new Date(dateString);
          return date.toLocaleDateString('en-US', {
            weekday: 'long',
            month: 'short',
            day: 'numeric',
            year: 'numeric'
          });
        }

        container.innerHTML = news.map(item => `
          <div class="news-item">
            <div class="news-header">
              <h2 class="news-title">${item.title}</h2>
              <div class="news-date">${formatDate(item.date)}</div>
            </div>
            <div class="news-meta">
              ${item.category ? `<span class="meta-tag">${item.category}</span>` : ''}
            </div>
            <div class="news-content">
              ${item.content || ''}
              ${item.highlights && item.highlights.length > 0 ? `<div class="highlight"><strong>Key Points:</strong><br>${item.highlights.map(h => `‚Ä¢ ${h}`).join('<br>')}</div>` : ''}
            </div>
          </div>
        `).join('');
      } catch (error) {
        console.error('Error loading news:', error);
        container.innerHTML = '<div class="loading-state">Error loading news. Please try again later.</div>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadNews);
  </script>
</body>
</html>
